(function(){var e={541:function(e,t,a){"use strict";a.r(t),t["default"]={id:"check-usage",viewBox:"0 0 32 32",url:a.p+"img/icons.5b7bc20e.svg#check",toString:function(){return this.url}}},3700:function(e,t,a){"use strict";a.r(t),t["default"]={id:"close-usage",viewBox:"0 0 50 50",url:a.p+"img/icons.5b7bc20e.svg#close",toString:function(){return this.url}}},5704:function(e,t,a){"use strict";a.r(t),t["default"]={id:"copy-link-usage",viewBox:"0 0 122.88 122.88",url:a.p+"img/icons.5b7bc20e.svg#copy-link",toString:function(){return this.url}}},130:function(e,t,a){"use strict";a.r(t),t["default"]={id:"open-link-usage",viewBox:"0 0 122.6 122.88",url:a.p+"img/icons.5b7bc20e.svg#open-link",toString:function(){return this.url}}},4829:function(e,t,a){"use strict";var n=a(9242),l=a(7139),s=a(3396),o=a(4870),i=a(2268);function u(e,t){const a=(0,o.iH)(!0),n=(0,o.iH)(null),l=async()=>{try{return await e(t)}catch(l){n.value=l}finally{a.value=!1}};return{isLoading:a,error:n,fetchData:l}}a(6699);var r=a(6265),c=a.n(r);const d=c().create({baseURL:"/"});d.interceptors.request.use((function(e){return e}),(function(e){return Promise.reject(e)})),d.interceptors.response.use((function(e){return e}),(function(e){return Promise.reject(e)}));var p=d;class m{static async get(e,t){const a=await p.get(e,{params:t});return a.data}static async post(e,t){const a=await p.post(e,t);return a.data}}class f{static async getAll(){return m.get("/psk-test/data.json")}}const v=(0,l.Q_)("main",{state:()=>({flats:{},houses:[],entrances:[],tooltip:{},currentFlatId:null,filters:[]}),getters:{availableEntrances(e){return e.entrances.filter((t=>e.houses.includes(t.house_id)))},groupedEntrances(){return this.availableEntrances.reduce(((e,t)=>(e[t.house_id]?e[t.house_id].push(t):e[t.house_id]=[t],e)),{})}},actions:{setFilters(){const{minSquare:e,maxSquare:t,minCost:a,maxCost:n,plan_type:l,status:s}=Object.values(this.flats).reduce(((e,t)=>((!e.minSquare||t.square<e.minSquare)&&(e.minSquare=Math.floor(t.square)),(!e.maxSquare||t.square>e.maxSquare)&&(e.maxSquare=Math.ceil(t.square)),(!e.minCost||t.cost<e.minCost)&&(e.minCost=Math.floor(t.cost)),(!e.maxCost||t.cost>e.maxCost)&&(e.maxCost=Math.ceil(t.cost)),t.plan_type&&!e.plan_type.includes(t.plan_type)&&e.plan_type.push(t.plan_type),t.status&&!e.status.includes(t.status)&&e.status.push(t.status),e)),{minSquare:null,maxSquare:null,minCost:null,maxCost:null,plan_type:[],status:[]});this.filters=[{type:"checkbox",code:"status",name:"Статус:",items:s},{type:"checkbox",code:"plan_type",name:"Планировка:",items:l},{type:"range",code:"square",name:"Площадь:",minLimit:e,maxLimit:t},{type:"range",code:"cost",name:"Стоимость:",minLimit:a,maxLimit:n},{type:"switch",code:"subsidy",name:"Субсидированная"},{type:"switch",code:"marginal",name:"Маржинальная"},{type:"switch",code:"renovation",name:"С ремонтом"},{type:"switch",code:"installment",name:"С рассрочкой"}]},async fetchCheckerboard(){try{const{flats:e,houses:t,entrances:a}=await f.getAll();this.flats=e,this.houses=t,this.entrances=a}catch(e){console.log(e)}},setTooltipData(e){this.tooltip=e},changeCurrentFlatId(e){this.currentFlatId=e}}}),_={class:"ui-loader"};function w(e,t){return(0,s.wg)(),(0,s.iD)("div",_)}var h=a(89);const g={},y=(0,h.Z)(g,[["render",w],["__scopeId","data-v-6a6f49ab"]]);var b=y;const k={key:0},S={key:1,class:"loader"},U={key:2,class:"main"};var x=(0,s.aZ)({setup(e){const t=v(),{error:a,fetchData:n,isLoading:l}=u(t.fetchCheckerboard);return(0,s.bv)((async()=>{await n()})),(e,t)=>{const n=(0,s.up)("RouterView");return(0,o.SU)(a)?((0,s.wg)(),(0,s.iD)("div",k,(0,i.zw)((0,o.SU)(a)),1)):(0,o.SU)(l)?((0,s.wg)(),(0,s.iD)("div",S,[(0,s.Wm)(b)])):((0,s.wg)(),(0,s.iD)("main",U,[(0,s.Wm)(n)]))}}});const D=(0,h.Z)(x,[["__scopeId","data-v-b261d51e"]]);var I=D,j=a(678);const C={class:"ui-svg-icon",xmlns:"http://www.w3.org/2000/svg"},q=["href"];var V=(0,s.aZ)({props:{iconName:null},setup(e){const t=e;let n=a(7254)(`./${t.iconName}.svg`);Object.prototype.hasOwnProperty.call(n,"default")&&(n=n.default);const l=n.url;return(e,t)=>((0,s.wg)(),(0,s.iD)("svg",C,[(0,s._)("use",{href:(0,o.SU)(l)},null,8,q)]))}});const Z=(0,h.Z)(V,[["__scopeId","data-v-e7793562"]]);var O=Z;const W={class:"ui-modal__title"},F={class:"ui-modal__inner"},z={class:"ui-modal__footer"};var L=(0,s.aZ)({props:{modelValue:{type:Boolean},width:null},emits:["update:modelValue","close"],setup(e,{emit:t}){const a=e,l=(0,o.iH)(null);(0,s.YP)((()=>a.modelValue),(e=>{(0,s.Y3)((()=>{e&&l.value&&l.value.focus()}))}));const u=()=>{t("close",!1),t("update:modelValue",!1)},r=(0,s.Fl)((()=>({width:`${a.width}px`})));return(t,a)=>e.modelValue?((0,s.wg)(),(0,s.iD)("div",{key:0,class:"ui-modal",onClick:u},[(0,s._)("div",{ref_key:"element",ref:l,class:"ui-modal__content",style:(0,i.j5)((0,o.SU)(r)),tabindex:"0",onClick:a[0]||(a[0]=(0,n.iM)((()=>{}),["stop"]))},[(0,s._)("h2",W,[(0,s.WI)(t.$slots,"header")]),(0,s._)("div",F,[(0,s.WI)(t.$slots,"default",(0,i.vs)((0,s.F4)({closeModal:u})))]),(0,s._)("div",z,[(0,s.WI)(t.$slots,"footer")]),(0,s.Wm)(O,{class:"ui-modal__icon",iconName:"close",onClick:u,tabindex:"0",onKeydown:(0,n.D2)(u,["enter"])},null,8,["onKeydown"])],4)])):(0,s.kq)("",!0)}});const H=(0,h.Z)(L,[["__scopeId","data-v-10236d36"]]);var E=H;const N={class:"ui-tooltip"};function P(e,t){return(0,s.wg)(),(0,s.iD)("div",N,[(0,s.WI)(e.$slots,"default",{},void 0,!0)])}const Y={},$=(0,h.Z)(Y,[["render",P],["__scopeId","data-v-188b8abf"]]);var K=$;function M(e){if(!e)return"Нет";let t="";return"C"===e?t="Студия":Number.isInteger(+e[0])?(t+=+e[0]+"-комнатная","E"===e[1]&&(t+=" евро"),t+=" квартира"):t=e,t}const R="кв.м.",B="рублей";var T={AREA_UNIT_SQUARE:R,PRICE_VALUE:B};function A(e){return e.toLocaleString()}function J(e){return e?"Да":"Нет"}const Q={class:"flat"},G={class:"flat__title"};var X=(0,s.aZ)({props:{flatId:null},setup(e){const t=e,a=v(),n=a.flats[t.flatId],l=M,u=T.AREA_UNIT_SQUARE,r=T.PRICE_VALUE,c=A(n.cost),d=J;return(e,t)=>((0,s.wg)(),(0,s.iD)("div",Q,[(0,s._)("h2",G,(0,i.zw)((0,o.SU)(l)((0,o.SU)(n).plan_type)),1),(0,s._)("span",null," Тип: "+(0,i.zw)((0,o.SU)(n).type),1),(0,s._)("span",null," Статус: "+(0,i.zw)((0,o.SU)(n).status),1),(0,s._)("span",null," Субсидированная: "+(0,i.zw)((0,o.SU)(d)((0,o.SU)(n).subsidy)),1),(0,s._)("span",null," Маржинальная: "+(0,i.zw)((0,o.SU)(d)((0,o.SU)(n).marginal)),1),(0,s._)("span",null," С ремонтом: "+(0,i.zw)((0,o.SU)(d)((0,o.SU)(n).renovation)),1),(0,s._)("span",null," С рассрочкой: "+(0,i.zw)((0,o.SU)(d)((0,o.SU)(n).installment)),1),(0,s._)("span",null," Номер этажа: "+(0,i.zw)((0,o.SU)(n).floor),1),(0,s._)("span",null," Номер: "+(0,i.zw)((0,o.SU)(n).number),1),(0,s._)("span",null," Площадь: "+(0,i.zw)((0,o.SU)(n).square)+" "+(0,i.zw)((0,o.SU)(u)),1),(0,s._)("span",null," Стоимость: "+(0,i.zw)((0,o.SU)(c))+" "+(0,i.zw)((0,o.SU)(r)),1)]))}});const ee=(0,h.Z)(X,[["__scopeId","data-v-0195e2ad"]]);var te=ee;function ae(){const e=(0,o.iH)(!1),t=()=>{e.value=!1},a=()=>{e.value=!0};return{isShow:e,hide:t,show:a}}const ne={class:"flat-wrapper"};function le(e,t){return(0,s.wg)(),(0,s.iD)("li",ne,[(0,s.WI)(e.$slots,"default",{},void 0,!0)])}const se={},oe=(0,h.Z)(se,[["render",le],["__scopeId","data-v-3b9b58c5"]]);var ie=oe;const ue={class:"floor-numbers"},re={class:"body-1"};var ce=(0,s.aZ)({props:{count:null},setup(e){return(t,a)=>((0,s.wg)(),(0,s.iD)("ul",ue,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.count,(e=>((0,s.wg)(),(0,s.j4)(ie,{key:e,class:"floor-numbers__inner text-primary"},{default:(0,s.w5)((()=>[(0,s._)("span",re,(0,i.zw)(e),1)])),_:2},1024)))),128))]))}});const de=(0,h.Z)(ce,[["__scopeId","data-v-7315047d"]]);var pe=de;const me={key:0,class:"flat__triangle_subsidy"},fe={key:1,class:"flat__triangle_marginal"},ve={key:2,class:"flat__triangle_renovation"},_e={key:3,class:"flat__triangle_installment"},we={key:1,class:"flat_empty"};var he=(0,s.aZ)({props:{flat:null},setup(e){const t=e,a=(0,s.Fl)((()=>({flat_status_booking:"Бронь"===t.flat.status,flat_status_contract:"Договор"===t.flat.status,flat_status_keys:"Выданы ключи"===t.flat.status,flat_status_registration:"Оформление"===t.flat.status,flat_status_free:"Свободна"===t.flat.status,flat_subsidy:t.flat.subsidy,flat_marginal:t.flat.marginal,flat_renovation:t.flat.renovation,flat_installment:t.flat.installment})));return(t,n)=>((0,s.wg)(),(0,s.j4)(ie,null,{default:(0,s.w5)((()=>["Квартира"===e.flat.type?((0,s.wg)(),(0,s.iD)("div",{key:0,class:(0,i.C_)(["flat_room body-1 text-white",(0,o.SU)(a)])},[(0,s.Uk)((0,i.zw)(e.flat.plan_type)+" ",1),e.flat.subsidy?((0,s.wg)(),(0,s.iD)("div",me)):(0,s.kq)("",!0),e.flat.marginal?((0,s.wg)(),(0,s.iD)("div",fe)):(0,s.kq)("",!0),e.flat.renovation?((0,s.wg)(),(0,s.iD)("div",ve)):(0,s.kq)("",!0),e.flat.installment?((0,s.wg)(),(0,s.iD)("div",_e)):(0,s.kq)("",!0)],2)):"Нежилые помещения"===e.flat.type?((0,s.wg)(),(0,s.iD)("div",we)):(0,s.kq)("",!0)])),_:1}))}});const ge=(0,h.Z)(he,[["__scopeId","data-v-5e555019"]]);var ye=ge;const be=["onKeydown"];var ke=(0,s.aZ)({props:{flat:null,disabled:{type:Boolean}},emits:["open"],setup(e,{emit:t}){const a=e,l=v();let u;const r=(e,t)=>{a.disabled||(u=setTimeout((()=>{const{top:a,left:n}=d(e);l.setTooltipData({isShow:!0,text:`Тип: ${t.type}; Статус: ${t.status}`,position:{top:a+e.offsetHeight+2,left:n}})}),300))},c=()=>{a.disabled||(clearTimeout(u),l.setTooltipData({isShow:!1}))};function d(e){const t=e.getBoundingClientRect(),a=document.documentElement.scrollLeft,n=document.documentElement.scrollTop;return{top:t.top+n,left:t.left+a}}const p=(0,s.Fl)((()=>({"flat-display_focusable":!a.disabled,"flat-display_disabled":a.disabled}))),m=()=>{a.disabled||t("open",a.flat)};return(t,a)=>((0,s.wg)(),(0,s.iD)("div",{onMouseenter:a[0]||(a[0]=a=>r(t.$el,e.flat)),onMouseleave:c,onFocus:a[1]||(a[1]=a=>r(t.$el,e.flat)),onBlur:c,onKeydown:(0,n.D2)(m,["enter"]),onClick:m,class:(0,i.C_)((0,o.SU)(p)),tabindex:"0"},[(0,s.Wm)(ye,{flat:e.flat},null,8,["flat"])],42,be))}});const Se=(0,h.Z)(ke,[["__scopeId","data-v-314bd780"]]);var Ue=Se;const xe=Symbol(),De={class:"floor"};var Ie=(0,s.aZ)({props:{floor:null},emits:["flatHover","flatBlur"],setup(e,{emit:t}){const a=v(),n=e=>{a.changeCurrentFlatId(e.id)},l=(0,s.f3)(xe),i=e=>{t("flatHover",e)},u=()=>{t("flatBlur")};return(t,a)=>((0,s.wg)(),(0,s.iD)("ul",De,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.floor.flats,((e,t)=>((0,s.wg)(),(0,s.j4)(Ue,{class:"floor__item",key:e.id,flat:(0,o.SU)(l)[e.id],disabled:(0,o.SU)(l)[e.id].disabled||!1,onOpen:n,onMouseenter:a=>(0,o.SU)(l)[e.id].disabled?null:i(t+1),onMouseleave:u},null,8,["flat","disabled","onMouseenter"])))),128))]))}});const je=(0,h.Z)(Ie,[["__scopeId","data-v-fd0a546e"]]);var Ce=je;const qe={class:"entrance"};var Ve=(0,s.aZ)({props:{entrance:null},setup(e){const t=(0,o.qj)({left:"0",opacity:"0"}),a=(0,o.qj)({top:"0",opacity:"0"}),n=(e,n)=>{t.opacity="1",t.left=2*e-2+"em",a.opacity="1",a.top=2*n+"em"},l=()=>{a.opacity="0",t.opacity="0"};return(u,r)=>((0,s.wg)(),(0,s.iD)("div",qe,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.entrance.floors,((e,t)=>((0,s.wg)(),(0,s.j4)(Ce,{key:e.floor,floor:e,onFlatHover:e=>n(e,t),onFlatBlur:l},null,8,["floor","onFlatHover"])))),128)),(0,s._)("div",{class:"entrance__hover-bg entrance__hover-bg_vertical",style:(0,i.j5)((0,o.SU)(t))},null,4),(0,s._)("div",{class:"entrance__hover-bg entrance__hover-bg_horizontal",style:(0,i.j5)((0,o.SU)(a))},null,4)]))}});const Ze=(0,h.Z)(Ve,[["__scopeId","data-v-413cb65a"]]);var Oe=Ze;const We={class:"house"},Fe={class:"house__floor-numbers"},ze={class:"house__bottom"},Le={class:"body-2 text-primary"};var He=(0,s.aZ)({props:{entrances:null},setup(e){const t=e,a=Math.max(...t.entrances.map((e=>e.floors.length)));return(t,n)=>((0,s.wg)(),(0,s.iD)("div",We,[(0,s._)("ul",Fe,[(0,s.Wm)(pe,{count:(0,o.SU)(a)},null,8,["count"])]),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.entrances,(e=>((0,s.wg)(),(0,s.iD)("div",{class:"house__floors",key:e.id},[(0,s.Wm)(Oe,{entrance:e},null,8,["entrance"]),(0,s._)("div",ze,[(0,s._)("h4",Le,(0,i.zw)(e.title),1)])])))),128))]))}});const Ee=(0,h.Z)(He,[["__scopeId","data-v-4016b0a4"]]);var Ne=Ee;const Pe={class:"list"};var Ye=(0,s.aZ)({props:{houses:null},setup(e){return(t,a)=>((0,s.wg)(),(0,s.iD)("section",Pe,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(Object.keys(e.houses),(t=>((0,s.wg)(),(0,s.j4)(Ne,{key:t,entrances:e.houses[t]},null,8,["entrances"])))),128))]))}});const $e=(0,h.Z)(Ye,[["__scopeId","data-v-5a36bde2"]]);var Ke=$e,Me=(0,s.aZ)({emits:["click"],setup(e,{emit:t}){const a=e=>{t("click",e)};return(e,t)=>((0,s.wg)(),(0,s.iD)("button",{class:"ui-button",onClick:a},[(0,s.WI)(e.$slots,"default")]))}});const Re=(0,h.Z)(Me,[["__scopeId","data-v-4e3fc9c0"]]);var Be=Re;const Te=(0,s.Uk)(" Посмотреть легенду "),Ae=(0,s.Uk)(" Легенда "),Je={key:1,class:"legend"},Qe={class:"legend__option-title"};var Ge=(0,s.aZ)({setup(e){const{isShow:t,show:a}=ae(),n=v(),l=new Map,u={type:"Тип помещения",status:"Статус помещения",subsidy:"Субсидированная",marginal:"Маржинальная",renovation:"С ремонтом",installment:"С рассрочкой"},r=(0,s.Fl)((()=>Array.from(l.keys()))),c={id:"",installment:!1,renovation:!1,subsidy:!1,marginal:!1,plan_type:"1К",square:10,number:"1",floor:1,status:"Договор",type:"Квартира",article:null,cost:1e4,state:null},d=J,p=(0,o.iH)(!1),m=()=>{if(a(),p.value)return;const e=Object.keys(u);Object.values(n.flats).forEach((t=>{const a=Object.keys(t);a.forEach((a=>{const n=a;e.includes(n)&&t[n]&&(l.has(n)?l.get(n)?.add(t[n]):l.set(n,(new Set).add(t[n])))}))})),p.value=!0};return(e,a)=>((0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(Be,{class:"legend-btn",onClick:m},{default:(0,s.w5)((()=>[Te])),_:1}),(0,s.Wm)(E,{modelValue:(0,o.SU)(t),"onUpdate:modelValue":a[0]||(a[0]=e=>(0,o.dq)(t)?t.value=e:null)},{header:(0,s.w5)((()=>[Ae])),default:(0,s.w5)((()=>[p.value?((0,s.wg)(),(0,s.iD)("div",Je,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)((0,o.SU)(r),(e=>((0,s.wg)(),(0,s.iD)("div",{key:e,class:"legend__option"},[(0,s._)("h4",Qe,(0,i.zw)(u[e]),1),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)((0,o.SU)(l).get(e),(t=>((0,s.wg)(),(0,s.iD)("div",{key:t,class:"legend__value"},[(0,s.Wm)(ye,{class:"legend__flat",flat:{...c,[e]:t}},null,8,["flat"]),(0,s.Uk)(" "+(0,i.zw)("boolean"===typeof t?(0,o.SU)(d)(t):t),1)])))),128))])))),128))])):((0,s.wg)(),(0,s.j4)(b,{key:0}))])),_:1},8,["modelValue"])],64))}});const Xe=(0,h.Z)(Ge,[["__scopeId","data-v-6077bd88"]]);var et=Xe;const tt={class:"ui-checkbox"},at=["checked"],nt={class:"ui-checkbox__box"};var lt=(0,s.aZ)({props:{modelValue:{type:[Boolean,Array]},value:null},emits:["update:modelValue"],setup(e,{emit:t}){const a=e,n=(0,s.Fl)((()=>a.modelValue)),l=(0,s.Fl)((()=>"object"===typeof n.value?n.value.includes(a.value||""):n.value)),i=e=>{if("boolean"===typeof a.modelValue)t("update:modelValue",e);else if("object"===typeof n.value)if(e)t("update:modelValue",[...n.value,a.value]);else{const e=n.value.indexOf(a.value||"");if(e<0)return;const l=Array.from(n.value);l.splice(e,1),t("update:modelValue",l)}};return(e,t)=>((0,s.wg)(),(0,s.iD)("label",tt,[(0,s._)("input",{class:"ui-checkbox__input visually-hidden",type:"checkbox",checked:(0,o.SU)(l),onChange:t[0]||(t[0]=e=>i(e.target.checked))},null,40,at),(0,s._)("span",nt,[(0,s.Wm)(O,{class:"ui-checkbox__icon",iconName:"check"})]),(0,s.WI)(e.$slots,"default")]))}});const st=(0,h.Z)(lt,[["__scopeId","data-v-ee36ace8"]]);var ot=st;const it=e=>((0,s.dD)("data-v-64a7fed3"),e=e(),(0,s.Cn)(),e),ut={class:"ui-range"},rt={class:"ui-range__inputs"},ct=["min","max"],dt=["min","max"],pt=it((()=>(0,s._)("div",{class:"ui-range__bg-line"},null,-1))),mt={class:"ui-range__outputs"};var ft=(0,s.aZ)({props:{min:null,max:null,minLimit:null,maxLimit:null},emits:["update:min","update:max"],setup(e,{emit:t}){const a=e,l=(0,o.iH)(String(a.min)),u=(0,o.iH)(String(a.max));(0,s.YP)((()=>a.min),(e=>{l.value=String(e)})),(0,s.YP)((()=>a.max),(e=>{u.value=String(e)})),(0,s.YP)((()=>l.value),(e=>{l.value=String(+e>=+u.value?+u.value-1:+e)})),(0,s.YP)((()=>u.value),(e=>{u.value=String(+e<=+l.value?+l.value+1:+e)}));const r=()=>{t("update:min",+l.value),t("update:max",+u.value)};return(t,a)=>((0,s.wg)(),(0,s.iD)("div",ut,[(0,s.WI)(t.$slots,"default"),(0,s._)("div",rt,[(0,s.wy)((0,s._)("input",{type:"range","onUpdate:modelValue":a[0]||(a[0]=e=>l.value=e),min:e.minLimit,max:e.maxLimit,onChange:r},null,40,ct),[[n.nr,l.value]]),(0,s.wy)((0,s._)("input",{type:"range","onUpdate:modelValue":a[1]||(a[1]=e=>u.value=e),min:e.minLimit,max:e.maxLimit,onChange:r},null,40,dt),[[n.nr,u.value]]),pt]),(0,s._)("div",mt,[(0,s._)("span",null,(0,i.zw)(l.value),1),(0,s._)("span",null,(0,i.zw)(u.value),1)])]))}});const vt=(0,h.Z)(ft,[["__scopeId","data-v-64a7fed3"]]);var _t=vt;const wt=e=>((0,s.dD)("data-v-1b9a093a"),e=e(),(0,s.Cn)(),e),ht={class:"ui-switch"},gt=["checked"],yt=wt((()=>(0,s._)("span",{class:"ui-switch__box"},[(0,s._)("span",{class:"ui-switch__circle"})],-1)));var bt=(0,s.aZ)({props:{modelValue:{type:Boolean}},emits:["update:modelValue"],setup(e,{emit:t}){const a=e=>{t("update:modelValue",e)};return(t,n)=>((0,s.wg)(),(0,s.iD)("label",ht,[(0,s._)("input",{class:"ui-switch__input visually-hidden",type:"checkbox",checked:e.modelValue,onChange:n[0]||(n[0]=e=>a(e.target.checked))},null,40,gt),yt,(0,s.WI)(t.$slots,"default")]))}});const kt=(0,h.Z)(bt,[["__scopeId","data-v-1b9a093a"]]);var St=kt;const Ut=(0,s.Uk)(" Открыть фильтр "),xt=(0,s.Uk)(" Фильтры "),Dt={class:"filter-panel"},It={class:"filter-footer"},jt=(0,s.Uk)(" Сохранить "),Ct=(0,s.Uk)(" Сбросить ");var qt=(0,s.aZ)({props:{filters:null},emits:["change","reset"],setup(e,{emit:t}){const a=e,n=(0,o.qj)(JSON.parse(JSON.stringify(a.filters)));(0,s.YP)((()=>a.filters),(e=>{Object.assign(n,e)}));const{isShow:l,show:u}=ae(),r=()=>{t("change",n)},c=()=>{t("reset")};return(e,t)=>((0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(Be,{onClick:(0,o.SU)(u)},{default:(0,s.w5)((()=>[Ut])),_:1},8,["onClick"]),(0,s.Wm)(E,{modelValue:(0,o.SU)(l),"onUpdate:modelValue":t[0]||(t[0]=e=>(0,o.dq)(l)?l.value=e:null),"content-class":"filter-modal",width:400},{header:(0,s.w5)((()=>[xt])),default:(0,s.w5)((()=>[(0,s._)("div",Dt,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)((0,o.SU)(n),(e=>((0,s.wg)(),(0,s.iD)(s.HY,null,["checkbox"===e.type?((0,s.wg)(),(0,s.iD)("div",{key:e.code},[(0,s._)("h4",null,(0,i.zw)(e.name),1),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.items,(t=>((0,s.wg)(),(0,s.j4)(ot,{modelValue:e.values,"onUpdate:modelValue":t=>e.values=t,value:t,key:t},{default:(0,s.w5)((()=>[(0,s.Uk)((0,i.zw)(t),1)])),_:2},1032,["modelValue","onUpdate:modelValue","value"])))),128))])):"range"===e.type?((0,s.wg)(),(0,s.j4)(_t,{min:e.min,"onUpdate:min":t=>e.min=t,max:e.max,"onUpdate:max":t=>e.max=t,"min-limit":e.minLimit,"max-limit":e.maxLimit,key:e.code},{default:(0,s.w5)((()=>[(0,s._)("h4",null,(0,i.zw)(e.name),1)])),_:2},1032,["min","onUpdate:min","max","onUpdate:max","min-limit","max-limit"])):(0,s.kq)("",!0),"switch"===e.type?((0,s.wg)(),(0,s.j4)(St,{modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,key:e.code},{default:(0,s.w5)((()=>[(0,s._)("h4",null,(0,i.zw)(e.name),1)])),_:2},1032,["modelValue","onUpdate:modelValue"])):(0,s.kq)("",!0)],64)))),256))])])),footer:(0,s.w5)((()=>[(0,s._)("div",It,[(0,s.Wm)(Be,{onClick:r},{default:(0,s.w5)((()=>[jt])),_:1}),(0,s.Wm)(Be,{onClick:c},{default:(0,s.w5)((()=>[Ct])),_:1})])])),_:1},8,["modelValue"])]))}});const Vt=(0,h.Z)(qt,[["__scopeId","data-v-0889a3ba"]]);var Zt=Vt;const Ot={class:"filter-panel"},Wt={class:"room-links"},Ft=["onKeydown"],zt=(0,s.Uk)(" Скопировать ссылку на квартиру "),Lt=["onKeydown"],Ht=(0,s.Uk)(" Открыть в новой вкладке "),Et=(0,s.Uk)(" Копирование ссылки прошло успешно "),Nt=(0,s.Uk)(" Ошибка копирования ссылки ");var Pt=(0,s.aZ)({setup(e){const t=v(),a=(0,j.yj)(),l=(0,j.tv)(),u=(0,s.Fl)((()=>t.currentFlatId)),r=(0,s.Fl)((()=>!!t.currentFlatId)),c=()=>t.changeCurrentFlatId(null),d=(0,s.Fl)((()=>t.tooltip)),p=(0,s.Fl)((()=>!!d.value.isShow&&{top:d.value.position.top+"px",left:d.value.position.left+"px"})),m=()=>{if(!u.value)return;const e=new URL(`${window.location.origin}${l.options.history.createHref(`/detail/${u.value}`)}`);navigator.clipboard.writeText(e.href).then((()=>w()),(()=>g()))},f=()=>{u.value&&l.push({name:"detail",params:{id:u.value}})},{isShow:_,show:w}=ae(),{isShow:h,show:g}=ae();t.setFilters();const y=(0,s.Fl)((()=>t.filters.map((e=>{switch(e.type){case"switch":return{...e,value:Object.prototype.hasOwnProperty.call(a.query,e.code)};case"range":if(Object.prototype.hasOwnProperty.call(a.query,e.code)&&a.query[e.code]){const[t,n]=decodeURI(a.query[e.code])?.split(",")||[];if(!isNaN(+t)&&!isNaN(+n))return{...e,min:+t,max:+n}}return{...e,min:e.minLimit,max:e.maxLimit};case"checkbox":{if(!Object.prototype.hasOwnProperty.call(a.query,e.code))return{...e,values:[]};const t=(decodeURI(a.query[e.code])?.split(",")||[]).filter((t=>e.items.includes(t)));return{...e,values:t}}default:return e}})))),b=e=>{const t={};return e.forEach((e=>{switch(e.type){case"checkbox":e.values.length&&(t[e.code]=encodeURI(e.values.join(",")));break;case"range":e.min&&e.max&&(e.min!==e.minLimit||e.max!==e.maxLimit)&&(t[e.code]=encodeURI([e.min,e.max].join(",")));break;case"switch":e.value&&(t[e.code]=null);break}})),t},k=async e=>{const t=b(e);await l.push({path:a.path,query:t})},S=()=>{l.push({path:a.path,query:{}})},U=(0,s.Fl)((()=>t.groupedEntrances)),x=(0,s.Fl)((()=>y.value.filter((e=>{switch(e.type){case"switch":if(e.value)return!0;break;case"range":if(e.min!==e.minLimit||e.max!==e.maxLimit)return!0;break;case"checkbox":if(e.values.length)return!0;break;default:return e}return!1})))),D=(0,s.Fl)((()=>{if(!x.value.length)return t.flats;const e=JSON.parse(JSON.stringify(t.flats));for(const t in e){const a=e[t];for(const e of x.value){const t=a[e.code];if(null===t)break;switch(e.type){case"switch":a[e.code]||(a.disabled=!0);break;case"range":(e.min>t||e.max<t)&&(a.disabled=!0);break;case"checkbox":e.values.includes(String(t))||(a.disabled=!0);break;default:return e}}}return e}));return(0,s.JJ)(xe,D),(e,t)=>((0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",Ot,[(0,s.Wm)(Zt,{filters:(0,o.SU)(y),onChange:k,onReset:S},null,8,["filters"])]),(0,s.Wm)(et),(0,s.Wm)(Ke,{houses:(0,o.SU)(U)},null,8,["houses"]),(0,o.SU)(d).isShow?((0,s.wg)(),(0,s.j4)(K,{key:0,class:"tooltip",style:(0,i.j5)((0,o.SU)(p))},{default:(0,s.w5)((()=>[(0,s.Uk)((0,i.zw)((0,o.SU)(d).text),1)])),_:1},8,["style"])):(0,s.kq)("",!0),(0,s.Wm)(E,{"model-value":(0,o.SU)(r),onClose:c},{default:(0,s.w5)((()=>[(0,s.Wm)(te,{"flat-id":(0,o.SU)(u)},null,8,["flat-id"]),(0,s._)("div",Wt,[(0,s._)("button",{class:"room-link",onKeydown:(0,n.D2)(m,["enter"]),onClick:t[0]||(t[0]=e=>m())},[zt,(0,s.Wm)(O,{iconName:"copy-link"})],40,Ft),(0,s._)("button",{class:"room-link",onKeydown:(0,n.D2)(f,["enter"]),onClick:t[1]||(t[1]=e=>f())},[Ht,(0,s.Wm)(O,{iconName:"open-link"})],40,Lt)]),(0,s.Wm)(E,{modelValue:(0,o.SU)(_),"onUpdate:modelValue":t[2]||(t[2]=e=>(0,o.dq)(_)?_.value=e:null)},{default:(0,s.w5)((()=>[Et])),_:1},8,["modelValue"]),(0,s.Wm)(E,{modelValue:(0,o.SU)(h),"onUpdate:modelValue":t[3]||(t[3]=e=>(0,o.dq)(h)?h.value=e:null)},{default:(0,s.w5)((()=>[Nt])),_:1},8,["modelValue"])])),_:1},8,["model-value"])],64))}});const Yt=(0,h.Z)(Pt,[["__scopeId","data-v-39074050"]]);var $t=Yt,Kt=(0,s.aZ)({setup(e){const t=(0,j.yj)(),a=t.params.id;return(e,t)=>((0,s.wg)(),(0,s.j4)(te,{class:"flat-detail","flat-id":(0,o.SU)(a)},null,8,["flat-id"]))}});const Mt=(0,h.Z)(Kt,[["__scopeId","data-v-101e417e"]]);var Rt=Mt;const Bt=[{path:"/",name:"home",component:$t},{path:"/detail/:id",name:"detail",component:Rt}],Tt=(0,j.p7)({history:(0,j.PO)("/psk-test/"),routes:Bt});var At=Tt;(0,n.ri)(I).use(At).use((0,l.WB)()).mount("#app")},7254:function(e,t,a){var n={"./check.svg":541,"./close.svg":3700,"./copy-link.svg":5704,"./open-link.svg":130};function l(e){var t=s(e);return a(t)}function s(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}l.keys=function(){return Object.keys(n)},l.resolve=s,e.exports=l,l.id=7254}},t={};function a(n){var l=t[n];if(void 0!==l)return l.exports;var s=t[n]={exports:{}};return e[n](s,s.exports,a),s.exports}a.m=e,function(){var e=[];a.O=function(t,n,l,s){if(!n){var o=1/0;for(c=0;c<e.length;c++){n=e[c][0],l=e[c][1],s=e[c][2];for(var i=!0,u=0;u<n.length;u++)(!1&s||o>=s)&&Object.keys(a.O).every((function(e){return a.O[e](n[u])}))?n.splice(u--,1):(i=!1,s<o&&(o=s));if(i){e.splice(c--,1);var r=l();void 0!==r&&(t=r)}}return t}s=s||0;for(var c=e.length;c>0&&e[c-1][2]>s;c--)e[c]=e[c-1];e[c]=[n,l,s]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.p="/psk-test/"}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,n){var l,s,o=n[0],i=n[1],u=n[2],r=0;if(o.some((function(t){return 0!==e[t]}))){for(l in i)a.o(i,l)&&(a.m[l]=i[l]);if(u)var c=u(a)}for(t&&t(n);r<o.length;r++)s=o[r],a.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return a.O(c)},n=self["webpackChunktest_task"]=self["webpackChunktest_task"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=a.O(void 0,[998],(function(){return a(4829)}));n=a.O(n)})();
//# sourceMappingURL=app.eedd1838.js.map